!function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};window.ClickableCard=function(){function a(a,b){this.name=a,this.number=b}return a}(),window.Player=function(){function b(){this.updateHighScore=a(this.updateHighScore,this),this.determineHighScore=a(this.determineHighScore,this),this.highScore=this.determineHighScore()}return b.prototype.determineHighScore=function(){var a;return a=localStorage.getItem("matching.highScore"),a?(console.log("found highscore: "+a),parseInt(a)):0},b.prototype.updateHighScore=function(a){return 0===this.highScore||a<this.highScore?(this.highScore=a,localStorage.setItem("matching.highScore",this.highScore)):void 0},b}(),window.Board=function(){function b(b,c){this.setUpBoard=a(this.setUpBoard,this),this.prepareCards=a(this.prepareCards,this),this.possibleMatches=c,this.cards=this.prepareCards(b),this.setUpBoard()}return b.prototype.prepareCards=function(a){var b,c,d,e,f,g,h;for(console.log("preparing cards"),f=a.slice(0,this.possibleMatches),e=f.concat(f).shuffle(),c=[],d=g=0,h=e.length;h>g;d=++g)b=e[d],c.push(new ClickableCard(b,d));return c},b.prototype.setUpBoard=function(){var a=this;return console.log("setting up the board"),$("#board div.flipper").each(function(b,c){return $(c).find("span.imageId").html(b.toString()),$(c).find("div.back div.image").addClass(a.cards[b].name)})},b}(),window.Game=function(){function b(b,c,d){this.updateChoices=a(this.updateChoices,this),this.checkForMatch=a(this.checkForMatch,this),this.turns=0,this.player=b,this.board=new Board(c,d),this.firstChoice=null,this.secondChoice=null,this.matches=0,this.possibleMatches=d,this.locked=!1}return b.prototype.checkForMatch=function(){return this.firstChoice===this.secondChoice?($("#board").find(".flipped").each(function(){return $(this).hasClass("matched")?void 0:$(this).addClass("matched")}),this.matches+=1):$("#board").find(".flipped").each(function(){return $(this).hasClass("matched")?void 0:$(this).removeClass("flipped")}),this.matches===this.possibleMatches&&(this.player.updateHighScore(this.turns),$("#turns").html(this.turns),$("#highScore").html(this.player.highScore),$(".gameboard").addClass("dim"),$(".scoreboard").fadeIn(1e3)),this.firstChoice=null,this.secondChoice=null,this.locked=!1},b.prototype.updateChoices=function(a){return this.firstChoice?this.secondChoice?void 0:this.secondChoice=a:this.firstChoice=a},b}()}.call(this),function(){$(function(){var a,b,c,d;return a=["spidey","waldo","megaman","rainbowdash","ironman","mario","link","scarlet","wolverine","trooper","ninja","aidorucat","audrey","kimono","mardigras","mom","riddler","superman","monroe","android","minion"],b=8,d=new Player,c=new Game(d,a,b),$("#playAgain").click(function(){return $(".flipper").delay(1e3).removeClass("flipped matched"),$("div.back.card div.image").attr("class","image"),c=new Game(d,a,b),$(".scoreboard").hide(),$(".gameboard").removeClass("dim")}),$(".flipper").click(function(){var a,b,d,e,f,g,h;if(b=$(this),!c.locked&&!b.hasClass("flipped")){for(c.locked=!0,e=parseInt(b.find("span.imageId").text()),d=null,h=c.board.cards,f=0,g=h.length;g>f;f++)if(a=h[f],a.number===e){d=a.name;break}return b.addClass("flipped"),c.updateChoices(d),c.firstChoice&&c.secondChoice?(c.turns+=1,setTimeout(function(){return c.checkForMatch()},1e3)):c.locked=!1}})})}.call(this);